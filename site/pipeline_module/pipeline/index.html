<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Pipeline Generator - PhD Project Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Pipeline Generator";
        var mkdocs_page_input_path = "pipeline_module/pipeline.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/markdown.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> PhD Project Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API Module</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../api_module/overview/">API Module Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api_module/api_client/">API Client</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api_module/api_data_processor/">API Data Processor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api_module/__main__/">API Main</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Pipeline Module</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../overview/">Pipeline Module Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../__main__/">Pipeline Main</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Pipeline Generator</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#class-pipeline">Class: Pipeline</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#initialisation">Initialisation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#methods">Methods</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#read_or_download_sensors">read_or_download_sensors</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#read_or_download_data">read_or_download_data</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#preprocess_data">preprocess_data</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#apply_feature_engineering">apply_feature_engineering</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#load_dataloader">load_dataloader</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#train_model">train_model</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#test_model">test_model</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#run_pipeline">run_pipeline</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#usage-example">Usage Example</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pipeline-helper-module">Pipeline Helper Module</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../stages/">Pipeline Stages</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/running_pipeline/">Running Pipeline</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/viewing_data/">Viewing Data</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">PhD Project Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Pipeline Module</li>
      <li class="breadcrumb-item active">Pipeline Generator</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="pipeline-generator">Pipeline Generator</h1>
<p>The <code>Pipeline</code> class is the core component of the data processing pipeline. It orchestrates the entire process from downloading sensor data to training and testing models. The module uses 'mlflow` for experiment tracking.</p>
<h2 id="class-pipeline">Class: Pipeline</h2>
<h3 id="initialisation">Initialisation</h3>
<pre><code class="language-python">class Pipeline:
    def __init__(self, experiment_name: str = None):
        # Initialise the pipeline with an optional experiment name
</code></pre>
<p>If no <code>experiment_name</code> is provided, a random string will be generated. The outputs from the model training and analysis are stored in the mlruns directory and can be viewed by calling <code>mlflow ui</code> in the command line.</p>
<h3 id="methods">Methods</h3>
<h4 id="read_or_download_sensors"><code>read_or_download_sensors</code></h4>
<pre><code class="language-python">def read_or_download_sensors(self) -&gt; SensorListItem:
</code></pre>
<p>Downloads the list of sensors from the API or reads from local storage if available.</p>
<p><strong>Returns:</strong> A DataFrame containing the sensor list.</p>
<h4 id="read_or_download_data"><code>read_or_download_data</code></h4>
<pre><code class="language-python">def read_or_download_data(self) -&gt; RawDataItem:
</code></pre>
<p>Reads raw sensor data from local storage if available or downloads it from the API.</p>
<p><strong>Returns:</strong> A list of tuples, each containing a sensor name and its raw data DataFrame.</p>
<h4 id="preprocess_data"><code>preprocess_data</code></h4>
<pre><code class="language-python">def preprocess_data(self, raw_dfs) -&gt; PreprocessedItem:
</code></pre>
<p>Preprocesses the raw data.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>raw_dfs</code>: List of tuples containing sensor names and raw data DataFrames.</li>
</ul>
<p><strong>Returns:</strong> A list of tuples, each containing a sensor name and its preprocessed data DataFrame.</p>
<h4 id="apply_feature_engineering"><code>apply_feature_engineering</code></h4>
<pre><code class="language-python">def apply_feature_engineering(self, preprocessed_dfs) -&gt; EngineeredItem:
</code></pre>
<p>Applies feature engineering to preprocessed data.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>preprocessed_dfs</code>: List of tuples containing sensor names and preprocessed data DataFrames.</li>
</ul>
<p><strong>Returns:</strong> A list of tuples, each containing a sensor name and its feature-engineered data DataFrame.</p>
<h4 id="load_dataloader"><code>load_dataloader</code></h4>
<pre><code class="language-python">def load_dataloader(self, engineered_dfs) -&gt; DataLoaderItem:
</code></pre>
<p>Loads data into <code>dataloaders</code>.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>engineered_dfs</code>: List of tuples containing sensor names and feature-engineered data DataFrames.</li>
</ul>
<p><strong>Returns:</strong> A list of tuples, each containing a sensor name, model, train loader, validation loader, and test loader.</p>
<h4 id="train_model"><code>train_model</code></h4>
<pre><code class="language-python">def train_model(self, dataloaders_list) -&gt; TrainedModelItem:
</code></pre>
<p>Trains models using the prepared <code>dataloaders</code>.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>dataloaders_list</code>: List of tuples containing sensor names, models, and <code>dataloaders</code>.</li>
</ul>
<p><strong>Returns:</strong> A list of tuples, each containing a sensor name, trained model, test loader, training metrics, and validation metrics.</p>
<h4 id="test_model"><code>test_model</code></h4>
<pre><code class="language-python">def test_model(self, trained_models_list) -&gt; TestItem:
</code></pre>
<p>Tests the trained models.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>trained_models_list</code>: List of tuples containing sensor names, trained models, and test loaders.</li>
</ul>
<p><strong>Returns:</strong> A list of tuples, each containing a sensor name, test predictions, test labels, and test metrics.</p>
<h4 id="run_pipeline"><code>run_pipeline</code></h4>
<pre><code class="language-python">def run_pipeline(self):
</code></pre>
<p>Runs the entire pipeline, executing all steps from data download to model testing.</p>
<p><strong>Returns:</strong> A list of tuples containing test metrics for each sensor.</p>
<h3 id="usage-example">Usage Example</h3>
<pre><code class="language-python">from phd_package.pipeline.pipeline_generator import Pipeline

# Create a pipeline instance
pipeline = Pipeline(experiment_name=&quot;my_experiment&quot;)

# Run the entire pipeline
test_metrics = pipeline.run_pipeline()

# Or run individual steps
sensors_df = pipeline.read_or_download_sensors()
raw_dfs = pipeline.read_or_download_data()
preprocessed_dfs = pipeline.preprocess_data(raw_dfs)
# ... and so on
</code></pre>
<p>This <code>Pipeline</code> class provides a comprehensive workflow for processing sensor data, from raw data acquisition to model training and testing. Each method in the pipeline can be used independently or as part of the full <code>run_pipeline</code> process.</p>
<h3 id="pipeline-helper-module">Pipeline Helper Module</h3>
<p>The Pipeline class is supported by a set of helper functions that manage data processing, step execution, and configuration handling. These functions provide the underlying functionality for the pipeline's flexibility and modularity.
Key areas supported by helper functions include:</p>
<ul>
<li>Configuration management for processing steps</li>
<li>Dynamic execution of data processing steps</li>
<li>Caching and loading of processed data</li>
<li>Application of configurable processing steps to DataFrames</li>
</ul>
<p>For developers interested in extending or customising the pipeline, detailed documentation of these helper functions is available in the <code>pipeline_helper.py</code> module.
This Pipeline class, along with its supporting helper functions, provides a comprehensive workflow for processing sensor data, from raw data acquisition to model training and testing. Each method in the pipeline can be used independently or as part of the full run_pipeline process.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../__main__/" class="btn btn-neutral float-left" title="Pipeline Main"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../stages/" class="btn btn-neutral float-right" title="Pipeline Stages">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../__main__/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../stages/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
